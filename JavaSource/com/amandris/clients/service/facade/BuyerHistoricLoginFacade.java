package com.amandris.clients.service.facade;import java.util.Calendar;import java.util.Date;import java.util.Locale;import com.amandris.clients.service.dao.BuyerDAO;import com.amandris.clients.service.dao.BuyerHistoricLoginDAO;import com.amandris.clients.service.vo.Buyer;import com.amandris.clients.service.vo.BuyerHistoricLogin;import com.amandris.clients.util.exception.DataAccessErrorException;import com.amandris.clients.util.exception.DataUpdateErrorException;public class BuyerHistoricLoginFacade {	public boolean setBuyerHistoricLogin( Integer buyerId, String ipAddress, boolean isLogin, Locale locale) throws DataAccessErrorException, DataUpdateErrorException	{		BuyerHistoricLoginDAO	buyerHistoricLoginDAO	= new BuyerHistoricLoginDAO();		BuyerDAO				buyerDAO				= new BuyerDAO();		BuyerHistoricLogin		buyerHistoricLogin		= new BuyerHistoricLogin();		Buyer					buyer					= new Buyer();		Date					today					= Calendar.getInstance( locale).getTime();				buyer = buyerDAO.getBuyerById( buyerId, null);			if( buyer == null)					return false;				buyerHistoricLogin.setDate		( today);		buyerHistoricLogin.setBuyer		( buyer);		buyerHistoricLogin.setBuyerId	( buyer.getId());		buyerHistoricLogin.setIpAddress	( ipAddress);		buyerHistoricLogin.setIsLogin	( ( isLogin ? new Integer (1) : new Integer (0)));				buyerHistoricLoginDAO.setBuyerHistoricLogin( buyerHistoricLogin);				buyer.setLastLogin( today);		buyer.setIsOnLine( new Integer( 1));				buyerDAO.setBuyer( buyer);				return true;	}		}