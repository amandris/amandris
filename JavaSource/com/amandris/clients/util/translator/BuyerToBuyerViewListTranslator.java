package com.amandris.clients.util.translator;import com.amandris.clients.service.vo.Buyer;import com.amandris.clients.util.ConfigurationParameterManager;import com.amandris.clients.util.DBUtils;import com.amandris.clients.util.exception.TranslateValueObjectErrorException;import com.amandris.clients.web.view.BuyerViewList;public class BuyerToBuyerViewListTranslator extends Translator {	public Object translateView() throws TranslateValueObjectErrorException	{		BuyerViewList 	buyerViewList 	= new BuyerViewList();		Buyer			buyer			= ( Buyer) object;		int				pictureCount	= 0;		String			language		= "";				try{			if( buyer.getTextActive().intValue() == 1) {				buyerViewList.setCity						( DBUtils.controlNull( buyer.getCity()));				buyerViewList.setBriefCity					( DBUtils.briefString( buyer.getCity(), 15));				buyerViewList.setIntro						( DBUtils.controlNull( buyer.getIntro()));				buyerViewList.setBriefIntro					( DBUtils.briefString( buyer.getIntro(), 25));				buyerViewList.setText						( DBUtils.controlNull( buyer.getText()));				buyerViewList.setBriefText					( DBUtils.briefString( buyer.getText(), 100));			} else {				buyerViewList.setCity						( ConfigurationParameterManager.getMessages().getMessage( locale, "common.waitingForRevision"));				buyerViewList.setBriefCity					( ConfigurationParameterManager.getMessages().getMessage( locale, "common.briefWaitingForRevision"));				buyerViewList.setIntro						( ConfigurationParameterManager.getMessages().getMessage( locale, "common.waitingForRevision"));				buyerViewList.setBriefIntro					( ConfigurationParameterManager.getMessages().getMessage( locale, "common.briefWaitingForRevision"));				buyerViewList.setText						( ConfigurationParameterManager.getMessages().getMessage( locale, "common.waitingForRevision"));				buyerViewList.setBriefText					( ConfigurationParameterManager.getMessages().getMessage( locale, "common.briefWaitingForRevision"));			}						buyerViewList.setId							( DBUtils.controlNull( buyer.getId()));			buyerViewList.setAge						( Integer.toString( DBUtils.getAge( buyer.getBirthdate(), locale)));			buyerViewList.setContactsSent				( DBUtils.controlNull( buyer.getContactsSent()));			buyerViewList.setContactsAccepted			( DBUtils.controlNull( buyer.getContactsAccepted()));			buyerViewList.setContactsNotReplied			( DBUtils.controlNull( buyer.getContactsNotReplied()));			buyerViewList.setContactsRejected			( DBUtils.controlNull( buyer.getContactsRejected()));			buyerViewList.setCountry					( ConfigurationParameterManager.getMessages().getMessage( locale, "country." + DBUtils.controlNull( buyer.getCountry().getText())));			buyerViewList.setCountryId					( buyer.getCountryId());			buyerViewList.setIsPublic					( DBUtils.controlNull( buyer.getIsPublic()));			buyerViewList.setDatesCanceled 				( DBUtils.controlNull( buyer.getDatesCanceled()));			buyerViewList.setHasPicture					( DBUtils.controlNull( buyer.getHasPicture()));			buyerViewList.setIsOnLine					( DBUtils.controlNull( buyer.getIsOnLine()));			buyerViewList.setLastLoginDate				( DBUtils.getDate( buyer.getLastLogin()));			buyerViewList.setLastLoginTime				( DBUtils.getTime( buyer.getLastLogin()));			buyerViewList.setLogin						( DBUtils.controlNull( buyer.getLogin()));			buyerViewList.setBriefLogin					( DBUtils.briefString( buyer.getLogin(), 15));						buyerViewList.setNegativeVotes				( DBUtils.controlNull( buyer.getNegativeVotes()));			buyerViewList.setMainPictureCode			( DBUtils.controlNull( buyer.getMainPictureCode()));			buyerViewList.setMainPicture				( DBUtils.controlNull( buyer.getMainPicture()));			buyerViewList.setPositiveVotes				( DBUtils.controlNull( buyer.getPositiveVotes()));			buyerViewList.setSex						( ConfigurationParameterManager.getMessages().getMessage( locale, "sex." + DBUtils.controlNull( buyer.getSexConst())));			buyerViewList.setSexId						( DBUtils.controlNull( buyer.getSexConst()));			buyerViewList.setState						( ConfigurationParameterManager.getMessages().getMessage( locale, "state." + DBUtils.controlNull( buyer.getState().getText())));			buyerViewList.setStateId					( buyer.getStateId());			buyerViewList.setLastLoginFrom				( ConfigurationParameterManager.getMessages().getMessage( locale, "timeTypeFrom." + DBUtils.getTimeFromType( buyer.getLastLogin(), locale, true), Integer.toString( DBUtils.getTimeFrom( buyer.getLastLogin(), locale, true))));																if( buyer.getContactsSent().intValue() == 0)				buyerViewList.setContactsAcceptedPercentage( "0");			else				buyerViewList.setContactsAcceptedPercentage( DBUtils.controlNull( new Double( ((double) buyer.getContactsAccepted().intValue() / ( double) buyer.getContactsSent().intValue()) * 100), 0));					}catch( Exception e) {			e.printStackTrace();			throw new TranslateValueObjectErrorException( object.getClass().getName(), buyerViewList.getClass().getName(), e);		}				return buyerViewList;	}}